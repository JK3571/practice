import folium
import webbrowser
import pandas as pd
import streamlit as st

# 장소 데이터 (위도/경도는 예시 좌표)
places = [
    {"name":"인더주","lat":37.389, "lon":126.643, "query":"인더주 동물체험 카페 인천 송도"},
    {"name":"포레스트 아웃팅스","lat":37.395, "lon":126.645, "query":"포레스트 아웃팅스 송도 인천"},
    {"name":"나 그리고 너","lat":37.3955,"lon":126.642,"query":"나 그리고 너 송도 파스타 인천"},
    {"name":"메이드림","lat":37.456,"lon":126.400,"query":"메이드림 영종도 카페 인천"},
    {"name":"세븐스플로어","lat":37.485,"lon":126.723,"query":"세븐스플로어 부평 파스타 인천"},
    {"name":"베이커리 율교P3120","lat":37.392,"lon":126.649,"query":"베이커리 율교P3120 송도 인천"},
    {"name":"미션파이브","lat":37.415,"lon":126.731,"query":"미션파이브 인천 실내 놀이터"},
    {"name":"또모공예세상","lat":37.442,"lon":126.736,"query":"또모공예세상 인천 남동구 비즈공예"}
]

# 장소별 정보 (예시로 실제 검색 기반 정보를 입력하세요)
info = [
  {"name":"인더주", "평점": None, "특징":"동물체험 카페", "주소":"송도과학로16번길 33‑4 D동 1층", "전화":"032‑310‑9611", "영업":"11:00‑20:00 (입장마감 19:00)"},
  {"name":"포레스트 아웃팅스", "평점":4.2, "특징":"식물인테리어, 포토존 많은 대형카페", "주소":"연수구 청량로 145", "전화":"0507‑1377‑3750", "영업":"10:00‑22:00 (주방 20:00, 음료 21:00)"},
  {"name":"나 그리고 너", "평점":~4.5, "특징":"파스타, 고급스러운 인테리어, 와인 콜키지 프리", "주소":"연수구 하모니로 144 지웰프루지오 1층 106‑107호", "전화":"0507‑1334‑7763", "영업":"11:00‑21:30 (15:30‑17:00 브레이크타임)"},
  {"name":"메이드림", "평점":None, "특징":"교회 리모델링, 전시공간 있는 대형 베이커리카페", "주소":"중구 용유서로479번길 42", "전화":"0507‑1351‑1904", "영업":"10:00‑21:30 (라스트오더 20:00)"},
  {"name":"세븐스플로어", "평점":~4.0, "특징":"부평역 바로 앞, 고급 파스타·피자 + 뷰 좋은 7층", "주소":"부평구 부평대로 15 7층", "전화":"0507‑1305‑3027", "영업":"11:30‑21:00 (15:00‑17:00 브레이크타임, 라스트오더 20:00)"},
  {"name":"베이커리 율교P3120", "평점":~4.0‑5.0, "특징":"건강빵 전문, 인기 치아바타, 주말 웨이팅", "주소":"연수구 컨벤시아대로42번길 20 302동 101‑102호", "전화":"0507‑1429‑3120", "영업":"목·금·토 10:30‑21:00 (일요일 휴무)"},
  {"name":"미션파이브", "평점":None, "특징":"실내놀이터 오락실, 다양한 게임", "주소":"남동구 예술로 198 CGV 홈플러스 4층", "전화":"0507‑1480‑3650", "영업":"10:00‑22:00"},
  {"name":"또모공예세상", "평점":None, "특징":"비즈공예 체험 공방", "주소":"남동구 만수동 969‑8", "전화":None, "영업":"평일 13:00‑15:30"}  
]

# Create map
m = folium.Map(location=[37.395,126.65], zoom_start=12)
for p in places:
    folium.Marker(
        location=[p["lat"], p["lon"]],
        tooltip=p["name"],
        popup=folium.Popup(f'<a href="https://www.google.com/search?q={p["query"]}" target="_blank">{p["name"]} 검색</a>')
    ).add_to(m)

# Streamlit UI
st.set_page_config(page_title="인천 나들이 장소")
tab1, tab2 = st.tabs(["지도", "장소 리스트"])
with tab1:
    st.header("📍 인천 나들이 장소 지도")
    st_folium = st_folium(m, width=700, height=500)
with tab2:
    st.header("📋 장소 정보 리스트")
    df = pd.DataFrame(info)
    st.table(df)